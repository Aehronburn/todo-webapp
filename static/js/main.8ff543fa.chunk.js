(this["webpackJsonptodo-webapp"]=this["webpackJsonptodo-webapp"]||[]).push([[0],{216:function(e,t,a){e.exports=a.p+"static/media/Waihou.16e7b69d.png"},220:function(e,t,a){e.exports=a.p+"static/media/Mataura.f323cf2d.png"},221:function(e,t,a){e.exports=a.p+"static/media/Vorderrhein.73488154.png"},230:function(e,t,a){e.exports=a.p+"static/media/Doubs.99d8216c.png"},238:function(e,t,a){e.exports=a(428)},243:function(e,t,a){},428:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),o=a.n(c),i=(a(243),a(10)),u=a(58),l=a(28),s=a(26),m=a.n(s),d=a(39),p=a(435),h=a(437),f=a(215),b=a(440),g=p.a.Text,E={title:{height:"8vh",marginTop:"-4px"}},x=function(e){var t=e.title,a=e.username,c=e.isTodo,o=Object(n.useState)(!1),u=Object(i.a)(o,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,s?r.a.createElement(l.a,{to:"/home"}):"",r.a.createElement(h.a,{backIcon:c,onBack:function(){return m(!0)},style:E.title,title:t,extra:a?r.a.createElement(r.a.Fragment,null,r.a.createElement(f.a,{style:{backgroundColor:"#87d068"},icon:r.a.createElement(b.a,null)}),r.a.createElement(g,{type:"secondary"},a)):""}))},v=a(429),O=a(433),j=a(436),y=a(438),k=a(430),w=a(35),C=a(439),q=a(216),S=a.n(q),T=a(441),I=Object(n.createContext)(),z=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1];return r.a.createElement(I.Provider,{value:[c,o]},e.children)},A=Object(n.createContext)(),D=function(e){var t=Object(n.useState)(""),a=Object(i.a)(t,2),c=a[0],o=a[1],u=Object(n.useState)(""),l=Object(i.a)(u,2),s=l[0],m=l[1];return r.a.createElement(A.Provider,{value:{username:[c,o],password:[s,m]}},e.children)},P=v.a.Header,N=v.a.Content,H={header:{backgroundColor:"white",minHeight:"8vh",textAlign:"center"},content:{height:"92vh",backgroundImage:"url("+S.a+")",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"rgb(240, 242, 245)"},card:{maxWidth:"320px",margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)",textAlign:"center"}},L=function(e){var t=e.authenticated,a=Object(n.useContext)(A),c=a.username,o=a.password,s=Object(i.a)(c,2),p=s[0],h=s[1],f=Object(i.a)(o,2),g=f[0],E=f[1],q=Object(n.useContext)(I),S=Object(i.a)(q,2),z=(S[0],S[1]),D=Object(n.useState)(!1),L=Object(i.a)(D,2),J=L[0],F=L[1],_=Object(i.a)(t,2),M=_[0],R=_[1],B=Object(n.useState)(!1),W=Object(i.a)(B,2),G=W[0],Y=W[1],K=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Y(!0),a=p,n=g,e.next=5,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/login",{method:"POST",body:JSON.stringify({username:a,password:n})});case 5:if(!(r=e.sent).ok){e.next=14;break}return e.next=9,r.json();case 9:c=e.sent,z(c.token),R(!0),e.next=16;break;case 14:console.log("error"),F(!J);case 16:Y(!1);case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(v.a,null,M?r.a.createElement(l.a,{to:"/home"}):"",r.a.createElement(P,{style:H.header},r.a.createElement(x,{title:"Login",isTodo:!1})),r.a.createElement(v.a,null,r.a.createElement(N,{style:H.content},r.a.createElement(O.a,{title:"Login",style:H.card},r.a.createElement(j.a,{onFinish:K},r.a.createElement(j.a.Item,{name:"username",rules:[{required:!0,message:"enter your username"}],onChange:function(e){h(e.target.value)}},r.a.createElement(y.a,{placeholder:"username",prefix:r.a.createElement(b.a,null)})),r.a.createElement(j.a.Item,{name:"password",rules:[{required:!0,message:"enter your password"}],onChange:function(e){E(e.target.value)}},r.a.createElement(y.a.Password,{placeholder:"password",prefix:r.a.createElement(T.a,null)})),r.a.createElement(j.a.Item,null,r.a.createElement(k.a,{direction:"vertical"},r.a.createElement(w.a,{type:"primary",htmlType:"submit",loading:G},"Login"),J?r.a.createElement(C.a,{showIcon:!0,closable:!0,type:"error",message:"wrong input"}):"")),r.a.createElement(u.b,{to:"/register"},"Register"))))))},J=a(220),F=a.n(J),_=v.a.Header,M=v.a.Content,R={header:{backgroundColor:"white",minHeight:"8vh",textAlign:"center"},content:{height:"92vh",backgroundImage:"url("+F.a+")",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"rgb(240, 242, 245)"},title:{marginTop:"16px"},card:{maxWidth:"320px",margin:"auto",position:"relative",top:"50%",transform:"translateY(-50%)",textAlign:"center"}},B=function(e){var t=e.authenticated,a=Object(n.useContext)(A),c=a.username,o=a.password,s=Object(i.a)(c,2),p=s[0],h=s[1],f=Object(i.a)(o,2),g=f[0],E=f[1],q=Object(n.useContext)(I),S=Object(i.a)(q,2),z=(S[0],S[1]),D=Object(n.useState)(!1),P=Object(i.a)(D,2),N=P[0],H=P[1],L=Object(i.a)(t,2),J=L[0],F=L[1],B=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=p,n=g,e.next=4,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/register",{method:"POST",body:JSON.stringify({username:a,password:n})});case 4:if(!e.sent.ok){e.next=16;break}return e.next=8,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/login",{method:"POST",body:JSON.stringify({username:a,password:n})});case 8:return r=e.sent,e.next=11,r.json();case 11:c=e.sent,z(c.token),F(!0),e.next=18;break;case 16:console.log("error"),H(!N);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(v.a,null,J?r.a.createElement(l.a,{to:"/home"}):"",r.a.createElement(_,{style:R.header},r.a.createElement(x,{title:"Registration",isTodo:!1})),r.a.createElement(v.a,null,r.a.createElement(M,{style:R.content},r.a.createElement(O.a,{title:"Registration",style:R.card},r.a.createElement(j.a,{onFinish:B},r.a.createElement(j.a.Item,{name:"username",rules:[{required:!0,message:"enter your username"}],onChange:function(e){h(e.target.value)}},r.a.createElement(y.a,{placeholder:"username",prefix:r.a.createElement(b.a,null)})),r.a.createElement(j.a.Item,{name:"password",rules:[{required:!0,message:"enter your password"}],onChange:function(e){E(e.target.value)}},r.a.createElement(y.a.Password,{placeholder:"password",prefix:r.a.createElement(T.a,null)})),r.a.createElement(j.a.Item,null,r.a.createElement(k.a,{direction:"vertical"},r.a.createElement(w.a,{type:"primary",htmlType:"submit"},"Register"),N?r.a.createElement(C.a,{showIcon:!0,closable:!0,type:"warning",message:"username already taken"}):"")),r.a.createElement(u.b,{to:"/"},"login"))))))},W=a(233),G={form:{margin:"16px 0px 16px 120px"}},Y=function(e){var t=e.submit,a=e.collection,c=e.user,o=e.isLoading,u=Object(n.useState)(""),l=Object(i.a)(u,2),s=l[0],m=l[1];return r.a.createElement(j.a,{style:G.form,name:"form",layout:"inline",onFinish:function(){t(a,s,c),m("")}},r.a.createElement(j.a.Item,{name:"name",rules:[{required:!0,message:"insert task name"}]},r.a.createElement(y.a,{placeholder:"task",value:s,onChange:function(e){m(e.target.value)}})),r.a.createElement(j.a.Item,null,r.a.createElement(w.a,{type:"primary",htmlType:"submit",loading:o},"Create")))},K=a(118),V=a(432),Q=a(221),U=a.n(Q),X=a(442),Z=v.a.Header,$=v.a.Content,ee=p.a.Link,te={header:{backgroundColor:"white",minHeight:"8vh",textAlign:"center"},content:{backgroundImage:"url("+U.a+")",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"rgb(240, 242, 245)",height:"100%"},table:{margin:"0px 120px 32px 120px"},layout:{backgroundColor:"rgb(240, 242, 245)",height:"100vh"}},ae=function(e){var t=e.location.state,a=t.collection,c=t.username,o=t.collectionName,u=Object(n.useState)([]),l=Object(i.a)(u,2),s=l[0],p=l[1],h=Object(n.useState)(!1),f=Object(i.a)(h,2),b=f[0],g=f[1],E=Object(n.useContext)(I),O=Object(i.a)(E,2),j=O[0];O[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(t){var a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/todos/"+t,{method:"GET",headers:{Authorization:j}});case 3:return a=e.sent,e.t0=p,e.next=7,a.json();case 7:e.t1=e.sent,(0,e.t0)(e.t1),e.next=14;break;case 11:e.prev=11,e.t2=e.catch(0),console.log(e.t2);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}})()(a)}),[b]);var y=function(){var e=Object(d.a)(m.a.mark((function e(t,a,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return g(!0),e.prev=1,e.next=4,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/todos",{method:"POST",headers:{Authorization:j},body:JSON.stringify({title:a,author:n,group:t})});case 4:g(!1),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,a,n){return e.apply(this,arguments)}}(),k=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.id,n=Object(W.a)(s),r=n.findIndex((function(e){return e._id===a})),c=!n[r].completed,n[r].completed=c,p(n),e.prev=6,e.next=9,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/todos/"+a,{method:"PATCH",headers:{Authorization:j},body:JSON.stringify({completed:c})});case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(6),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[6,11]])})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(d.a)(m.a.mark((function e(t){var a,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.target.id,n=s.filter((function(e){return e._id!==a})),p(n),e.prev=3,e.next=6,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/todos/"+a,{method:"DELETE",headers:{Authorization:j}});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(3),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t){return e.apply(this,arguments)}}(),C=[{title:"Task",dataIndex:"title",key:"title",width:"35%"},{title:"Author",dataIndex:"author",key:"author"},{title:"Date",dataIndex:"date",key:"date",render:function(e){return new Date(e).toLocaleString("it-IT")},sorter:function(e,t){return new Date(e.date)-new Date(t.date)},width:"20%"},{title:"Done",dataIndex:"completed",key:"completed",render:function(e,t){return r.a.createElement(K.a,{id:t._id,checked:t.completed,onChange:k})},filters:[{text:"completed",value:!0},{text:"uncompleted",value:!1}],filterMultiple:!1,onFilter:function(e,t){return t.completed===e},width:"10%"},{title:"Action",dataIndex:"_id",key:"_id",render:function(e){return r.a.createElement(ee,{id:e,onClick:w},"delete")},width:"10%"}];return r.a.createElement(v.a,{style:te.layout},r.a.createElement(Z,{style:te.header},r.a.createElement(x,{title:o,username:c,isTodo:r.a.createElement(X.a,null)})),r.a.createElement($,{style:te.content},r.a.createElement(Y,{submit:y,collection:a,user:c,isLoading:b}),r.a.createElement(V.a,{style:te.table,rowKey:"_id",dataSource:s,columns:C})))},ne=a(235),re=function(e){var t=e.component,a=e.authenticated,n=Object(ne.a)(e,["component","authenticated"]);return r.a.createElement(l.b,Object.assign({},n,{render:function(e){return a?r.a.createElement(t,e):r.a.createElement(l.a,{to:"/"})}}))},ce=a(434),oe=function(e){var t=e.isModifying,a=e.toggle,n=e.cardTitle,c=Object(i.a)(n,2),o=(c[0],c[1]);return r.a.createElement(ce.a,{title:"Modify title",visible:t,onCancel:a,onOk:function(){var e=document.getElementById("input");o(e.value),a()}},r.a.createElement(y.a,{id:"input",placeholder:"new title"}))},ie=p.a.Text,ue=function(e){var t=e.id,a=e.isDeleting,n=e.toggleDelete,c=e.eliminate;return r.a.createElement(ce.a,{title:"Delete collection",visible:a,onCancel:n,onOk:function(){c(t)}},r.a.createElement(ie,null,"Are you sure?"))},le=a(431),se=a(443),me=a(444),de=p.a.Text,pe=p.a.Link,he={card:{textAlign:"center"}},fe=function(e){var t=e.id,a=e.name,c=e.number,o=e.eliminate,u=e.username,s=e.save,m=Object(n.useState)(t),d=Object(i.a)(m,2),p=d[0],h=(d[1],Object(n.useState)(a)),f=Object(i.a)(h,2),b=f[0],g=f[1],E=Object(n.useState)(c),x=Object(i.a)(E,2),v=x[0],j=(x[1],Object(n.useState)(!1)),y=Object(i.a)(j,2),k=y[0],w=y[1],C=Object(n.useState)(!1),q=Object(i.a)(C,2),S=q[0],T=q[1],I=Object(n.useState)(!1),z=Object(i.a)(I,2),A=z[0],D=z[1],P=function(){w(!k)},N=function(){T(!S)};return Object(n.useEffect)((function(){s(p,b)}),[k]),r.a.createElement(r.a.Fragment,null,A?r.a.createElement(l.a,{to:{pathname:"/todo",state:{collection:p,username:u,collectionName:b}}}):"",r.a.createElement(O.a,{style:he.card,hoverable:!0,actions:[r.a.createElement(se.a,{onClick:function(){P()}}),r.a.createElement(me.a,{onClick:function(){N()}})]},r.a.createElement(pe,{id:p,onClick:function(e){e.target.id;D(!0)}},b),r.a.createElement(le.a,null),r.a.createElement(de,{type:"secondary"},v)),r.a.createElement(oe,{isModifying:k,toggle:P,cardTitle:[b,g]}),r.a.createElement(ue,{id:p,isDeleting:S,toggleDelete:N,eliminate:o}))},be=a(445),ge=a(446),Ee=p.a.Text,xe={card:{textAlign:"center"},text:{color:"rgb(33,148,255)"}},ve=function(e){var t=e.createNew,a=Object(n.useState)(""),c=Object(i.a)(a,2),o=c[0],u=c[1];return r.a.createElement(O.a,{style:xe.card,hoverable:!0,actions:[r.a.createElement(be.a,{onClick:function(e){e.preventDefault(),u("")}}),r.a.createElement(ge.a,{onClick:function(e){e.preventDefault(),t(o)}})]},r.a.createElement(Ee,{style:xe.text,strong:!0},"Create new"),r.a.createElement(le.a,null),r.a.createElement(y.a,{placeholder:"name",required:!0,onChange:function(e){u(e.target.value)},value:o}))},Oe=a(101),je=a(49),ye=a(230),ke=a.n(ye),we=v.a.Header,Ce=v.a.Content,qe={header:{backgroundColor:"white",minHeight:"8vh",textAlign:"center"},content:{height:"90vh",backgroundImage:"url("+ke.a+")",backgroundPosition:"center",backgroundSize:"cover",backgroundColor:"rgb(240, 242, 245)"},title:{marginTop:"16px"},row:{padding:"32px 80px 0px 80px"}},Se=function(){var e=Object(n.useContext)(I),t=Object(i.a)(e,2),a=t[0],c=(t[1],Object(n.useState)([])),o=Object(i.a)(c,2),u=o[0],l=o[1],s=Object(n.useContext)(A).username,p=Object(i.a)(s,2),h=p[0],f=(p[1],Object(n.useState)([])),b=Object(i.a)(f,2),g=b[0],E=b[1],O=Object(n.useState)(!1),j=Object(i.a)(O,2),y=j[0],k=j[1];Object(n.useEffect)((function(){(function(){var e=Object(d.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/collections",{method:"GET",headers:{Authorization:a}});case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,l(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[y]),Object(n.useEffect)((function(){E(w(u))}),[u]);var w=function(e){var t=[],a=1;return t[a]=[],e.forEach((function(e,n){n%4===0&&0!==n?(a++,t[a]=[],t[a].push(e)):t[a].push(e)})),t.shift(),t},C=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(u.filter((function(e){return e._id!==t}))),e.prev=1,e.next=4,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/collections/"+t,{method:"DELETE",headers:{Authorization:a}});case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/collections/",{method:"POST",headers:{Authorization:a},body:JSON.stringify({name:t})});case 3:k(!y),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}(),S=function(){var e=Object(d.a)(m.a.mark((function e(t,n){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://366q1oq2q5.execute-api.eu-south-1.amazonaws.com/dev/api/collections/"+t,{method:"PATCH",headers:{Authorization:a},body:JSON.stringify({name:n})});case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement(v.a,null,r.a.createElement(we,{style:qe.header},r.a.createElement(x,{title:"Home",username:h,isTodo:!1})),r.a.createElement(Ce,{style:qe.content},g.map((function(e,t){return r.a.createElement(Oe.a,{key:t,gutter:{xs:8,sm:16,md:24,lg:32},style:qe.row},e.map((function(e,t){return r.a.createElement(je.a,{key:t,span:6},r.a.createElement(fe,{id:e._id,name:e.name,number:e.count,eliminate:C,username:h,save:S}))})))})),r.a.createElement(Oe.a,{gutter:{xs:8,sm:16,md:24,lg:32},style:qe.row},r.a.createElement(je.a,{span:6},r.a.createElement(ve,{createNew:q})))))},Te=(a(427),function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],c=t[1];return r.a.createElement("div",{className:"App"},r.a.createElement(z,null,r.a.createElement(D,null,r.a.createElement(u.a,null,r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/",render:function(e){return r.a.createElement(L,Object.assign({},e,{authenticated:[a,c]}))}}),r.a.createElement(l.b,{exact:!0,path:"/register",render:function(e){return r.a.createElement(B,Object.assign({},e,{authenticated:[a,c]}))}}),r.a.createElement(re,{exact:!0,path:"/home",authenticated:a,component:Se}),r.a.createElement(re,{exact:!0,path:"/todo",authenticated:a,component:ae}))))))});o.a.render(r.a.createElement(r.a.Fragment,null,r.a.createElement(Te,null)),document.getElementById("root"))}},[[238,1,2]]]);
//# sourceMappingURL=main.8ff543fa.chunk.js.map